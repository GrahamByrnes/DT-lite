<!DOCTYPE sect3 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
               "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
		<!ENTITY % darktable_dtd SYSTEM "../../../dtd/darktable.dtd">
		%darktable_dtd;
		]>
<sect3 status="final" id="denoise_non_local_means">

  <title>Denoise&nbsp;&ndash; non local means</title>

  <indexterm>
    <primary>modules</primary>
    <secondary>denoise&nbsp;&ndash; non local means</secondary>
  </indexterm>

  <indexterm>
    <primary>denoise</primary>
    <secondary>non local means</secondary>
  </indexterm>

  <sect4>

    <title>Overview</title>

    <informaltable frame="none">
      <tgroup cols="2" colsep="0" rowsep="0">
        <colspec colwidth="6*"/>
        <colspec colwidth="4*"/>
        <tbody>
          <row>
            <entry>
              This is a denoise algorithm, which will work on chroma and/or luma.
            </entry>
            <entry>
              <graphic fileref="darkroom/modules/images/denoise_nlm.png" scalefit="1" width="80%" align="center" />
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>

  </sect4>

  <sect4>

    <title>Usage</title>

    <para>
      This module reduces noise in your image but preserves structures. This is accomplished by
      averaging each pixel with some surrounding pixels in the image. The weight of such a pixel
      in the averaging process depends on the similarity of its neighborhood with the
      neighborhood of the one pixel to be denoised. A patch with a certain size is used to
      measure that similarity. As denoising is a resource hungry process, it slows down
      pixelpipe processing significantly; consider activating this module late in your workflow.
    </para>

    <sect5>
      <title>patch size</title>
      <para>
        The radius of the patch for similarity evaluation.
      </para>
    </sect5>

    <sect5>
      <title>strength</title>
      <para>
        The strength of the denoise. Higher values lead to a stronger effect.
      </para>
    </sect5>

    <sect5>
      <title>luma</title>
      <para>
        Amount of denoise to apply to luma. Select carefully in order not to lose too much
        structure.
      </para>
    </sect5>

    <sect5>
      <title>chroma</title>
      <para>
        Amount of denoise to apply to chroma. You can be much more aggressive with this
        parameter compared to luma.
      </para>
    </sect5>

  </sect4>

</sect3>
