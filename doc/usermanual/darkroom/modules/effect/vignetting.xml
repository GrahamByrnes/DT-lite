<!DOCTYPE sect3 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
               "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
		<!ENTITY % darktable_dtd SYSTEM "../../../dtd/darktable.dtd">
		%darktable_dtd;
		]>
<sect3 status="final" id="vignetting">

  <title>Vignetting</title>

  <indexterm>
    <primary>modules</primary>
    <secondary>vignetting</secondary>
  </indexterm>

  <indexterm>
    <primary>vignetting</primary>
  </indexterm>

  <indexterm>
    <primary>artifact mitigation</primary>
    <secondary>banding</secondary>
  </indexterm>

  <sect4>

    <title>Overview</title>

    <informaltable frame="none">
      <tgroup cols="2" colsep="0" rowsep="0">
        <colspec colwidth="6*"/>
        <colspec colwidth="4*"/>
        <tbody>
          <row>
            <entry>
              This module is an artistic feature which creates vignetting (modification of the
              brightness/saturation at the borders).
            </entry>
            <entry>
              <graphic fileref="darkroom/modules/images/vignetting.png" scalefit="1" width="80%" align="center" />
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>

  </sect4>

  <sect4>

    <title>Usage</title>

    <para>
      The vignetting module has an extensive set of parameters to precisely tune its effect. It
      also will display graphical controls within the image if the module is in focus. Give it a
      try to get a feeling of how it works. On-screen controls and parameter sliders will stay
      in sync.
    </para>

    <para>
      This module is known to provoke banding artifacts under certain conditions; you should
      consider to activate the <emphasis>dithering</emphasis> module (see
      <xref linkend="dithering"/>).
    </para>

    <sect5>
      <title>scale</title>
      <para>
        Set the radius of the vignetting area.
      </para>
    </sect5>

    <sect5>
      <title>fall-off strength</title>
      <para>
        Sets the progressiveness of the fall-off. Higher values will cause a steeper transition.
      </para>
    </sect5>

    <sect5>
      <title>brightness</title>
      <para>
        Sets the intensity of brightening (positive values) or darkening (negative values).
      </para>
    </sect5>

    <sect5>
      <title>saturation</title>
      <para>
        Controls how strong colors become when desaturated or saturated in the darkened or
        brightened vignetting area.
      </para>
    </sect5>

    <sect5>
      <title>horizontal center</title>
      <para>
        Shifts the center of the vignetting area horizontally.
      </para>
    </sect5>

    <sect5>
      <title>vertical center</title>
      <para>
        Shifts the center of the vignetting area vertically.
      </para>
    </sect5>

    <sect5>
      <title>shape</title>
      <para>
        Influences the shape of the vignetting area. The default value of 1 causes a circular or
        elliptical area. Smaller values will shift the shape into a more square one; higher
        values turn it into a cross-like shape.
      </para>
    </sect5>

    <sect5>
      <title>automatic ratio</title>
      <para>
        Click this button to automatically adjust the width/height ratio of the vignetting area
        to the aspect ratio of the underlying image. The vignetting area will typically become
        elliptical.
      </para>
    </sect5>

    <sect5>
      <title>width/height ratio</title>
      <para>
        Manually adjust the width/height ratio of the vignetting area.
      </para>
    </sect5>

    <sect5>
      <title>dithering</title>
      <para>
        With this combobox you can activate random noise dithering to overcome banding artifacts
        caused by vignette gradients. Select <quote>8-bit output</quote> to prevent banding on
        monitor display and for JPEGs. When set to <quote>16-bit output</quote>, only a little
        dithering will be applied, just strong enough to compensate for banding on the fine
        grained 16-bit level. This feature is mostly obsoleted by our new module
        <emphasis>dithering</emphasis> (see <xref linkend="dithering"/>).
      </para>
    </sect5>

  </sect4>

  <sect4>

    <title>Examples</title>

    <para>
      <informaltable frame="none">
        <tgroup cols="2" colsep="0" rowsep="0">
          <colspec colwidth="4*"/>
          <colspec colwidth="6*"/>
          <tbody>
            <row>
              <entry>
                <graphic fileref="darkroom/modules/images/vignetting_ex1.png" scalefit="1" width="90%" align="center" />
              </entry>
              <entry>
                An image with vignetting and with graphical vignetting controls displayed.
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </para>

  </sect4>

</sect3>
