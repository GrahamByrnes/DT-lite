<!DOCTYPE sect3 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
               "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
		<!ENTITY % darktable_dtd SYSTEM "../../../dtd/darktable.dtd">
		%darktable_dtd;
		]>
<sect3 status="final" id="tonemapping">

  <title>Tonemapping</title>

  <indexterm>
    <primary>modules</primary>
    <secondary>tonemapping</secondary>
  </indexterm>

  <indexterm>
    <primary>tonemapping</primary>
    <seealso>global tonemap</seealso>
  </indexterm>

  <sect4>

    <title>Overview</title>

    <informaltable frame="none">
      <tgroup cols="2" colsep="0" rowsep="0">
        <colspec colwidth="6*"/>
        <colspec colwidth="4*"/>
        <tbody>
          <row>
            <entry>
              This module compresses the tonal range of HDR images, so they fit into the limits
              of a normal, low dynamic range image, using Durand's 2002 algorithm. darktable can
              import HDR images if they come in OpenEXR, RGBE or PFM format or as a DNG
              generated by darktable's HDR creation mechanism (see
              <xref linkend="selected_images"/>).
            </entry>
            <entry>
              <graphic fileref="darkroom/modules/images/tonemapping.png" scalefit="1" width="80%" align="center" />
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>

  </sect4>

  <sect4>

    <title>Usage</title>

    <para>
      The underlying algorithm uses a bilateral filter to decompose an image into a coarse base
      layer and a detail layer. The contrast of the base layer is compressed, while the detail
      layer is preserved, then both layers are re-combined.
    </para>

    <sect5>
      <title>contrast compression</title>
      <para>
        Sets the contrast compression level of the base layer. A higher compression will make
        the image fit a lower dynamic range.
      </para>
    </sect5>

    <sect5>
      <title>spatial extent</title>
      <para>
        Sets the spatial extent of the bilateral filter. Lower values cause the contrast
        compression to have stronger effects on image details.
      </para>
    </sect5>

  </sect4>

</sect3>
